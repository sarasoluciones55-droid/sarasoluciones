{% extends "listar.html" %}

{% block titulo %}
        <h1 class="text-center">Lista de pedidos</h1>
{% endblock titulo %}

{% block agregar %}
<a href="{{crear_url}}" class=" btn btn-primary btn btn-xs"><i class="fas fa-plus"></i>
          Agregar
</a>
{% endblock %}

{% block columnas %}

                <th>Id</th>
                        <th>id_cliente</th>
                         <th>id_producto</th>
                        <th>nombre_de_producto</th>
                        <th>cantidad</th>
                        <th>departamento_entrega</th>
                        <th>municipio_ciudad_entrega</th>
                             <th>direccion_entrega</th>
                        <th>comprobante_pago</th>
                        <th>estado_pedido</th>
                        <th>email</th>
                        <th>Acciones</th>

{% endblock %}

{% block iterar %}

            {% for a in object_list %}
                    <tr>
                        <td>{{ a.id }}</td>
                        <td>{{ a.id_cliente }}</td>
                        <td>{{ a.id_producto }}</td>
                        <td>{{ a.nombre_de_producto }}</td>
                        <td>{{ a.cantidad }}</td>
                        <td>{{ a.departamento_entrega }}</td>
                        <td>{{ a.municipio_ciudad_entrega }}</td>
                        <td>{{ a.direccion_entrega }}</td>
                        <td>{{ a.comprobante_pago }}</td>
                        <td>{{ a.estado_pedido }}</td>
                        <td>{{ a.email }}</td>
                        <td>
                            <a href="{% url 'mi_app:pedido_editar' a.id %}" class="btn btn-warning btn-sm"><i class="bi bi-pen-fill"></i></a>
                            <a href="{% url 'mi_app:pedido_eliminar' a.id %}" class="btn btn-danger btn-sm"><i class="bi bi-trash3-fill"></i></a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="12">No hay pedidos registrados.</td>
                    </tr>
                    {% endfor %}

<!-- Mensajes con SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  {% if messages %}
    {% for message in messages %}
      Swal.fire({
        icon: '{% if "success" in message.tags %}success{% elif "error" in message.tags %}error{% else %}info{% endif %}',
        title: '{{ message|escapejs }}',
        timer: 2500,
        showConfirmButton: false
      });
    {% endfor %}
  {% endif %}
</script>

{% endblock %}